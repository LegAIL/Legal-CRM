"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8575],{7159:function(e,t,a){a.r(t),a.d(t,{SimpleCreateCaseModal:function(){return h}});var s=a(7437),i=a(2265),n=a(605),l=a(3340),r=a(6110),o=a(2869),d=a(5186),c=a(6815),u=a(6818),p=a(3647),m=a(5153),f=a(8736),x=a(1817);function h({isOpen:e,onClose:t,onCaseCreated:a}){let{data:h}=(0,n.useSession)(),{toast:g}=(0,m.pm)(),[y,N]=(0,i.useState)(!1),[j,v]=(0,i.useState)({title:"",description:"",priority:l.CasePriority.MEDIUM,clientName:"",clientEmail:""}),b=(e,t)=>{v(a=>({...a,[e]:t}))},S=()=>{v({title:"",description:"",priority:l.CasePriority.MEDIUM,clientName:"",clientEmail:""})},k=async e=>{if(e.preventDefault(),!j.title?.trim()){g({title:"Fel",description:"Titel \xe4r obligatorisk",variant:"destructive"});return}N(!0);try{let e={title:j.title.trim(),description:j.description?.trim()||null,priority:j.priority,clientName:j.clientName?.trim()||null,clientEmail:j.clientEmail?.trim()||null},s=await fetch("/api/cases",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok){let e=await s.json();a(e),g({title:"Framg\xe5ng",description:"Case skapades framg\xe5ngsrikt"}),t(),S()}else{let e=await s.json();g({title:"Fel",description:e.error||"Misslyckades med att skapa case",variant:"destructive"})}}catch(e){console.error("Case creation error:",e),g({title:"Fel",description:"N\xe5got gick fel. F\xf6rs\xf6k igen.",variant:"destructive"})}finally{N(!1)}};return(0,s.jsx)(r.Vq,{open:e,onOpenChange:t,children:(0,s.jsxs)(r.cZ,{className:"sm:max-w-[600px]",children:[(0,s.jsxs)(r.fK,{children:[(0,s.jsxs)(r.$N,{className:"flex items-center gap-2",children:[(0,s.jsx)(f.Z,{className:"h-5 w-5"}),"Skapa Nytt Case"]}),(0,s.jsx)(r.Be,{children:"Fyll i grundl\xe4ggande information f\xf6r det nya caset"})]}),(0,s.jsxs)("form",{onSubmit:k,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"title",children:"Case-titel *"}),(0,s.jsx)(d.I,{id:"title",value:j.title,onChange:e=>b("title",e.target.value),placeholder:"Ange case-titel",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"description",children:"Beskrivning"}),(0,s.jsx)(u.g,{id:"description",value:j.description,onChange:e=>b("description",e.target.value),placeholder:"Beskriv \xe4rendet...",rows:3})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"clientName",children:"Klientnamn"}),(0,s.jsx)(d.I,{id:"clientName",value:j.clientName,onChange:e=>b("clientName",e.target.value),placeholder:"Klientens namn"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"clientEmail",children:"Klient-epost"}),(0,s.jsx)(d.I,{id:"clientEmail",type:"email",value:j.clientEmail,onChange:e=>b("clientEmail",e.target.value),placeholder:"klient@exempel.se"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"priority",children:"Prioritet"}),(0,s.jsxs)(p.Ph,{value:j.priority,onValueChange:e=>b("priority",e),children:[(0,s.jsx)(p.i4,{children:(0,s.jsx)(p.ki,{placeholder:"V\xe4lj prioritet"})}),(0,s.jsxs)(p.Bw,{children:[(0,s.jsx)(p.Ql,{value:"LOW",children:"L\xe5g"}),(0,s.jsx)(p.Ql,{value:"MEDIUM",children:"Medium"}),(0,s.jsx)(p.Ql,{value:"HIGH",children:"H\xf6g"}),(0,s.jsx)(p.Ql,{value:"URGENT",children:"Br\xe5dskande"})]})]})]}),(0,s.jsxs)(r.cN,{children:[(0,s.jsx)(o.z,{type:"button",variant:"outline",onClick:t,children:"Avbryt"}),(0,s.jsx)(o.z,{type:"submit",disabled:y,children:y?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Skapar..."]}):"Skapa Case"})]})]})]})})}},6110:function(e,t,a){a.d(t,{$N:function(){return x},Be:function(){return h},Vq:function(){return o},cN:function(){return f},cZ:function(){return p},fK:function(){return m},hg:function(){return d}});var s=a(7437),i=a(2265),n=a(9027),l=a(2489),r=a(4508);let o=n.fC,d=n.xz,c=n.h_;n.x8;let u=i.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.aV,{ref:a,className:(0,r.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));u.displayName=n.aV.displayName;let p=i.forwardRef(({className:e,children:t,...a},i)=>(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(n.VY,{ref:i,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,(0,s.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));p.displayName=n.VY.displayName;let m=({className:e,...t})=>(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});m.displayName="DialogHeader";let f=({className:e,...t})=>(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});f.displayName="DialogFooter";let x=i.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.Dx,{ref:a,className:(0,r.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));x.displayName=n.Dx.displayName;let h=i.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.dk,{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));h.displayName=n.dk.displayName},6815:function(e,t,a){a.d(t,{_:function(){return d}});var s=a(7437),i=a(2265),n=a(6394),l=a(7712),r=a(4508);let o=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.f,{ref:a,className:(0,r.cn)(o(),e),...t}));d.displayName=n.f.displayName},6818:function(e,t,a){a.d(t,{g:function(){return l}});var s=a(7437),i=a(2265),n=a(4508);let l=i.forwardRef(({className:e,...t},a)=>(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));l.displayName="Textarea"},5153:function(e,t,a){a.d(t,{pm:function(){return p}});var s=a(2265);let i=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},r=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=r(d,e),o.forEach(e=>{e(d)})}function u({...e}){let t=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function p(){let[e,t]=s.useState(d);return s.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}}}]);